language: node_js
node_js:
- 0.10
before_script:
- git config --global user.email "leiguorui@goodow.com"
- git config --global user.name "leiguorui"
- npm install -g bower
- cd gh-pages/ && git pull && git remote set-url origin "https://${GH_TOKEN}@github.com/leiguorui/drive-web-svg.git"
- cd ${TRAVIS_BUILD_DIR}
script:
- bower install
- gulp
after_script:
- cd gh-pages
- rm -rf `find . -maxdepth 1 -name "*" ! -name ".git*" ! -name "CNAME"`
- cp -r ../src/* .
- git add -A && git commit -a -m "Generated by ${TRAVIS_COMMIT}"
- test ${TRAVIS_PULL_REQUEST} == "false" && git push origin HEAD:gh-pages
- cd ${TRAVIS_BUILD_DIR}
env:
  global:
  - secure: OUoOno46B790w5FM0gtF3MsRj4wonOBHHck7f5gT+5YLSiqyDXjMd39ca35puCNxqKGyIRSQqAuzdprfJsZrA7B/YkeRKQxk8I1mNOpW+t/VQ7d95BruBoJnHFLg6Z+zE7+2Yf8AKtR3AOLdJU+Qn3pXXgFJrsmUf8DFJrguEEk=
